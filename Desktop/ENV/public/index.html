<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcoSocial</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <style>
    :root {
      --primary-green: #1B5E20;
      --secondary-green: #2E7D32;
      --light-green: #A5D6A7;
      --bg-gradient: linear-gradient(145deg, #e8f5e9, #f8fff8);
      --card-shadow: 0 8px 30px rgba(0,0,0,0.08);
      --hover-shadow: 0 12px 40px rgba(0,0,0,0.12);
      --blue-accent: #1565C0;
      --blue-light: #BBDEFB;
    }

    * {
      font-family: 'Poppins', sans-serif;
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #f0f5e9;
      color: #333;
      min-height: 100vh;
    }

    /* Sidebar Styles */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 240px;
      background: linear-gradient(160deg, var(--primary-green), var(--secondary-green));
      padding-top: 20px;
      box-shadow: 4px 0 15px rgba(0,0,0,0.1);
      z-index: 100;
      transition: all 0.3s ease;
    }

    .brand {
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: white;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }

    .brand i {
      font-size: 24px;
      color: var(--light-green);
      transition: transform 0.3s;
    }

    .brand:hover i {
      transform: rotate(-15deg);
    }

    .brand span {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .sidebar ul {
      list-style-type: none;
      padding: 0 15px;
    }

    .sidebar ul li {
      padding: 15px 20px;
      color: white;
      font-size: 16px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 8px;
      margin: 5px 0;
      position: relative;
    }

    .sidebar ul li:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateX(5px);
    }

    .sidebar ul li i {
      margin-right: 12px;
      width: 20px;
      text-align: center;
      font-size: 18px;
    }

    .active {
      background: rgba(255, 255, 255, 0.25);
      border-left: 4px solid var(--light-green);
    }

    .sidebar ul li::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -3px;
      width: 100%;
      height: 1px;
      background: rgba(255,255,255,0.1);
    }

    /* Story Section Styles */
    .container-story {
      display: flex;
      padding: 25px 30px;
      gap: 20px;
      margin-left: 240px;
      margin-right: 240px;
      width: calc(100% - 480px);
      overflow-x: auto;
      scrollbar-width: none;
      background: var(--bg-gradient);
      box-shadow: 0 4px 30px rgba(0,0,0,0.05);
      border-radius: 0 0 20px 20px;
      position: relative;
    }

    .container-story::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 15px;
      background: linear-gradient(to right, var(--primary-green), var(--secondary-green));
      border-radius: 0 0 20px 20px;
    }

    .container-story::-webkit-scrollbar {
      display: none;
    }

    .story {
      text-align: center;
      position: relative;
      padding: 15px;
      background: white;
      border-radius: 15px;
      box-shadow: var(--card-shadow);
      transition: all 0.3s;
      min-width: 120px;
      margin: 0 10px;
      flex-shrink: 0;
    }

    .story:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .story button {
      border: none;
      background: none;
      padding: 0;
      cursor: pointer;
      position: relative;
      display: block;
      margin: 0 auto;
    }

    .story img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 3px solid transparent;
      background: linear-gradient(45deg, #4CAF50, #81C784) border-box;
      padding: 2px;
      object-fit: cover;
      display: block;
      transition: transform 0.3s;
    }

    .story:hover img {
      transform: scale(1.05);
    }

    .story::after {
      position: absolute;
      bottom: 40px;
      right: 10px;
      background: #4CAF50;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      color: white;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .story:hover::after {
      transform: scale(1.1);
      background: #388E3C;
    }

    .story p {
      font-size: 13px;
      color: #2d572f;
      margin: 10px 0 0;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Post/Reel Section Styles */
    .post-container {
      margin-left: 240px;
      margin-right: 240px;
      width: calc(100% - 480px); 
      padding: 30px;
      display: grid;
      gap: 30px;
      max-width: 800px;
      background: transparent;
    }

    .post {
      background: white;
      border-radius: 18px;
      padding: 0;
      box-shadow: var(--card-shadow);
      transition: all 0.3s;
      overflow: hidden;
      position: relative;
    }

    .post:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .post-header {
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      background: white;
      border-bottom: 1px solid #e8f5e9;
    }

    .post-header img {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: 2px solid #4CAF50;
      padding: 2px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      object-fit: cover;
      transition: transform 0.3s;
    }

    .post-header:hover img {
      transform: rotate(10deg);
    }

    .post-header p {
      margin: 0;
      font-weight: 600;
      color: #2d572f;
      font-size: 15px;
    }

    .post-image {
      width: 100%;
      border-radius: 0;
      margin: 0;
      max-height: 600px;
      object-fit: contain;
      background: #f0f0f0;
      display: block;
    }

    .post-video {
      width: 100%;
      border-radius: 0;
      margin: 0;
      max-height: 600px;
      object-fit: cover;
      background: black;
      display: block;
      aspect-ratio: 9/16;
    }

    .post-actions {
      padding: 15px 20px;
      display: flex;
      gap: 25px;
      background: white;
      border-top: 1px solid #e8f5e9;
    }

    .post-actions i {
      font-size: 24px;
      transition: all 0.2s;
      color: #666;
      position: relative;
      cursor: pointer;
    }

    .post-actions i:hover {
      transform: scale(1.15);
    }

    .fa-heart:hover { color: #ff4081; }
    .fa-comment:hover { color: #42A5F5; }
    .fa-share:hover { color: #66BB6A; }

    /* Video Overlay */
    .post-video::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.1) 0%, transparent 100%);
      pointer-events: none;
    }

    /* Right Sidebar */
    .right-sidebar {
      position:fixed;
      right: 0;
      top: 0;
      height: 100vh;
      width: 240px;
      background: linear-gradient(160deg, var(--secondary-green), var(--primary-green));
      padding: 20px;
      color: white;
      box-shadow: -4px 0 15px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 100;
    }

    .right-sidebar h3 {
      font-size: 18px;
      margin-bottom: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
      padding-bottom: 10px;
      width: 80%;
      font-weight: 500;
    }

    .quote {
      font-size: 14px;
      margin: 15px 0;
      font-style: italic;
      padding: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      transition: all 0.3s;
      width: 90%;
    }

    .quote:hover {
      transform: translateX(-5px);
      background: rgba(255,255,255,0.15);
    }
    
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 24px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s;
    }

    .fab:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 6px 25px rgba(0,0,0,0.3);
    }
    @media (max-width: 1200px) {
      .right-sidebar {
        display: none;
      }
      .container-story, .post-container {
        margin-right: 0;
        width: calc(100% - 240px);
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 70px;
      }
      .sidebar .brand span, .sidebar ul li span {
        display: none;
      }
      .sidebar ul li {
        justify-content: center;
        padding: 15px 0;
      }
      .sidebar ul li i {
        margin-right: 0;
        font-size: 20px;
      }
      .container-story, .post-container {
        margin-left: 70px;
        width: calc(100% - 70px);
      }
      .container-story {
        padding: 15px;
      }
      .story {
        min-width: 80px;
        padding: 10px;
      }
      .story img {
        width: 60px;
        height: 60px;
      }
      .story::after {
        width: 20px;
        height: 20px;
        bottom: 30px;
        right: 5px;
        font-size: 12px;
      }
      .fab {
        width: 50px;
        height: 50px;
        font-size: 20px;
        bottom: 20px;
        right: 20px;
      }
    }
    .recording-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 25px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      text-align: center;
    }

    .video-container {
      width: 100%;
      margin-bottom: 20px;
    }

    #videoPreview {
      width: 100%;
      max-height: 400px;
      border-radius: 10px;
      background: #000;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .control-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #startRecord {
      background: #4CAF50;
      color: white;
    }

    #stopRecord {
      background: #f44336;
      color: white;
    }

    #uploadVideo {
      background: #2196F3;
      color: white;
    }

    #closeModal {
      background: #607d8b;
      color: white;
    }

    .control-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .control-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .timer {
      font-size: 18px;
      font-weight: bold;
      margin: 15px 0;
      color: #333;
    }

    .recording-indicator {
      display: none;
      align-items: center;
      gap: 8px;
      margin-bottom: 15px;
    }

    .recording-dot {
      width: 12px;
      height: 12px;
      background: #f44336;
      border-radius: 50%;
      animation: pulse 1.5s infinite;
    }

    /* New styles for eco-credits and impact tracking */
    .impact-card {
      margin: 15px 20px;
      padding: 15px;
      background: linear-gradient(to right, #e8f5e9, #e3f2fd);
      border-radius: 12px;
      border: 1px solid #c8e6c9;
      position: relative;
      overflow: hidden;
    }

    .impact-card.water {
      background: linear-gradient(to right, #e3f2fd, #bbdefb);
      border-color: #bbdefb;
    }

    .impact-card.air {
      background: linear-gradient(to right, #e8f5e9, #e3f2fd);
      border-color: #c8e6c9;
    }

    .impact-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      font-weight: 600;
      color: var(--primary-green);
    }

    .impact-card.water .impact-header {
      color: var(--blue-accent);
    }

    .impact-text {
      font-size: 14px;
      color: #2d572f;
      margin-bottom: 10px;
    }

    .impact-card.water .impact-text {
      color: #0d47a1;
    }

    .impact-progress {
      height: 8px;
      background-color: rgba(255, 255, 255, 0.5);
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, #4CAF50, #81C784);
      border-radius: 10px;
      width: 0;
      transition: width 1s ease;
      animation: pulse 2s infinite;
    }

    .impact-card.water .progress-bar {
      background: linear-gradient(to right, #1976D2, #64B5F6);
    }

    .impact-card.air .progress-bar {
      background: linear-gradient(to right, #4CAF50, #1976D2);
    }

    /* Comment section styles */
    .comments-section {
      padding: 0 20px 15px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease;
    }

    .comments-section.active {
      max-height: 500px;
      overflow-y: auto;
    }

    .comment {
      display: flex;
      gap: 10px;
      margin: 15px 0;
      padding-bottom: 10px;
      border-bottom: 1px solid #e8f5e9;
    }

    .comment-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      overflow: hidden;
    }

    .comment-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .comment-content {
      flex: 1;
    }

    .comment-user {
      font-weight: 600;
      font-size: 14px;
      color: #2d572f;
    }

    .comment-text {
      font-size: 14px;
      color: #555;
    }

    .comment-time {
      font-size: 12px;
      color: #888;
      margin-top: 3px;
    }

    /* Tabs for Posts/Reels */
    .content-tabs {
      display: flex;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      margin: 0 0 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      font-weight: 600;
      color: #555;
      cursor: pointer;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }

    .tab.active {
      color: var(--primary-green);
      border-bottom-color: var(--primary-green);
      background-color: rgba(165, 214, 167, 0.1);
    }

    /* Poster Generator Modal */
    .poster-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .poster-content {
      background: white;
      padding: 25px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .poster-preview {
      width: 100%;
      height: 400px;
      background: #f0f0f0;
      margin: 20px 0;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .poster-preview canvas {
      max-width: 100%;
      max-height: 100%;
      border-radius: 10px;
    }

    .poster-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .poster-input {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
    }

    .poster-actions {
      display: flex;
      justify-content: space-between;
    }

    /* Profile Modal */
    .profile-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .profile-content {
      background: white;
      padding: 25px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .profile-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 3px solid var(--primary-green);
      padding: 3px;
      overflow: hidden;
    }

    .profile-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }

    .profile-info h2 {
      margin: 0;
      color: var(--primary-green);
      font-size: 24px;
    }

    .profile-info p {
      margin: 5px 0 0;
      color: #666;
      font-size: 14px;
    }

    .profile-stats {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 10px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 600;
      color: var(--primary-green);
    }

    .stat-label {
      font-size: 12px;
      color: #666;
    }

    .eco-impact {
      background: linear-gradient(to right, #e8f5e9, #e3f2fd);
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
    }

    .eco-impact h3 {
      color: var(--primary-green);
      font-size: 18px;
      margin-bottom: 10px;
    }

    .impact-item {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }

    .impact-icon {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--primary-green);
      font-size: 20px;
    }

    .impact-details {
      flex: 1;
    }

    .impact-title {
      font-weight: 600;
      color: #2d572f;
      margin: 0;
    }

    .impact-value {
      color: #666;
      font-size: 14px;
      margin: 0;
    }

    /* Add Post Modal */
    .add-post-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .add-post-content {
      background: white;
      padding: 25px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .post-preview {
      width: 100%;
      height: 300px;
      background: #f0f0f0;
      margin: 20px 0;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .post-preview img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .post-preview .placeholder {
      color: #999;
      font-size: 16px;
    }

    .file-input {
      display: none;
    }

    .file-label {
      display: inline-block;
      padding: 10px 20px;
      background: var(--primary-green);
      color: white;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 15px;
    }

    .file-label:hover {
      background: var(--secondary-green);
      transform: translateY(-2px);
    }

    .post-caption {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-bottom: 15px;
      resize: none;
      font-family: 'Poppins', sans-serif;
    }

    .post-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }

    .tag {
      padding: 5px 15px;
      background: #e8f5e9;
      color: var(--primary-green);
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .tag.active {
      background: var(--primary-green);
      color: white;
    }

    .tag:hover {
      transform: translateY(-2px);
    }

    /* Toast notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
    }

    .toast {
      background: white;
      color: #333;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      animation: slideIn 0.3s ease, fadeOut 0.5s ease 2.5s forwards;
      max-width: 300px;
    }

    .toast.success {
      border-left: 4px solid #4CAF50;
    }

    .toast.error {
      border-left: 4px solid #f44336;
    }

    .toast.info {
      border-left: 4px solid #2196F3;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; visibility: hidden; }
    }

    /* Loading spinner */
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left-color: var(--primary-green);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Animations */
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.3; }
      100% { opacity: 1; }
    }

    @keyframes leaf-sway {
      0%, 100% {
        transform: rotate(-5deg);
      }
      50% {
        transform: rotate(5deg);
      }
    }

    .leaf-sway {
      animation: leaf-sway 3s ease-in-out infinite;
      transform-origin: bottom center;
    }

    @keyframes water-ripple {
      0% {
        box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.3);
      }
      100% {
        box-shadow: 0 0 0 20px rgba(59, 130, 246, 0);
      }
    }

    .water-ripple {
      animation: water-ripple 2s linear infinite;
    }
    
    /* Story viewer */
    .story-viewer {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 3000;
      justify-content: center;
      align-items: center;
    }
    
    .story-content {
      width: 100%;
      max-width: 400px;
      height: 80vh;
      position: relative;
      overflow: hidden;
      border-radius: 15px;
    }
    
    .story-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .story-close {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 24px;
      cursor: pointer;
      z-index: 3001;
    }
    
    .story-progress {
      position: absolute;
      top: 10px;
      left: 0;
      width: 100%;
      height: 4px;
      display: flex;
      gap: 5px;
      padding: 0 10px;
    }
    
    .progress-segment {
      flex: 1;
      height: 100%;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      width: 0;
      background: white;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <nav class="sidebar">
    <div class="brand">
      <i class="fa-solid fa-leaf"></i>
      <span>EcoGram</span>
    </div>
    <ul>
      <li class="active" id="nav-home"><i class="fa-solid fa-house"></i> <span>Home</span></li>
      <li id="nav-poster"><i class="fa-solid fa-paint-brush"></i> <span>Generate Poster</span></li>
      <li id="nav-add-post"><i class="fa-solid fa-circle-plus"></i> <span>Add Post</span></li>
      <li id="nav-profile"><i class="fa-solid fa-user"></i> <span>View Profile</span></li>
    </ul>
  </nav>

  <div class="right-sidebar">
    <h3>Eco Quotes</h3>
    <div id="quotes-container">
      <!-- Quotes will be loaded here -->
    </div>
  </div>

  <!-- Content Tabs -->
  <div class="container-story" id="stories-container">
    <!-- Stories will be loaded here -->
  </div>

  <div class="post-container">
    <div class="content-tabs">
      <div class="tab active" data-tab="posts">Posts</div>
      <div class="tab" data-tab="reels">Reels</div>
    </div>

    <div id="posts-tab" class="tab-content active">
      <!-- Posts will be loaded here -->
    </div>

    <div id="reels-tab" class="tab-content" style="display: none;">
      <!-- Reels will be loaded here -->
    </div>
  </div>

  <!-- Recording Modal -->
  <div id="recordingModal" class="recording-modal">
    <div class="modal-content">
      <h3>Record Your Video</h3>
      
      <div class="recording-indicator" id="recordingIndicator">
        <div class="recording-dot"></div>
        <span>Recording...</span>
      </div>
      
      <div class="timer" id="timer">00:00</div>
      
      <div class="video-container">
        <video id="videoPreview" autoplay muted></video>
      </div>
      
      <div class="controls">
        <button id="startRecord" class="control-btn">
          <i class="fas fa-circle"></i> Start
        </button>
        <button id="stopRecord" class="control-btn" disabled>
          <i class="fas fa-stop"></i> Stop
        </button>
        <button id="uploadVideo" class="control-btn" disabled>
          <i class="fas fa-cloud-upload-alt"></i> Upload
        </button>
        <button id="closeModal" class="control-btn">
          <i class="fas fa-times"></i> Close
        </button>
      </div>
    </div>
  </div>

  <!-- Poster Generator Modal -->
  <div id="posterModal" class="poster-modal">
    <div class="poster-content">
      <h3>Generate Environmental Awareness Poster</h3>
      
      <div class="poster-controls">
        <input type="text" id="posterTitle" class="poster-input" placeholder="Poster Title">
        <input type="text" id="posterSubtitle" class="poster-input" placeholder="Subtitle">
        <select id="posterTheme" class="poster-input">
          <option value="forest">Forest Conservation</option>
          <option value="ocean">Ocean Protection</option>
          <option value="climate">Climate Action</option>
          <option value="wildlife">Wildlife Protection</option>
          <option value="recycling">Recycling</option>
        </select>
        <input type="color" id="posterColor" class="poster-input" value="#1B5E20">
      </div>
      
      <div class="poster-preview">
        <canvas id="posterCanvas" width="500" height="700"></canvas>
      </div>
      
      <div class="poster-actions">
        <button id="generatePoster" class="control-btn" style="background: #4CAF50; color: white;">
          <i class="fas fa-magic"></i> Generate
        </button>
        <button id="downloadPoster" class="control-btn" style="background: #2196F3; color: white;">
          <i class="fas fa-download"></i> Download
        </button>
        <button id="sharePoster" class="control-btn" style="background: #66BB6A; color: white;">
          <i class="fas fa-share-alt"></i> Share
        </button>
        <button id="closePosterModal" class="control-btn" style="background: #607d8b; color: white;">
          <i class="fas fa-times"></i> Close
        </button>
      </div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div id="profileModal" class="profile-modal">
    <div class="profile-content">
      <h3>Your Profile</h3>
      
      <div class="profile-header">
        <div class="profile-avatar">
          <img id="profileAvatar" src="https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=1000&auto=format&fit=crop" alt="Your Profile">
        </div>
        <div class="profile-info">
          <h2 id="profileName">Emma Green</h2>
          <p id="profileUsername">@ecofriendly</p>
          <p id="profileBio">Environmental activist passionate about sustainable living and conservation.</p>
        </div>
      </div>
      
      <div class="profile-stats">
        <div class="stat">
          <div id="profilePostsCount" class="stat-value">24</div>
          <div class="stat-label">Posts</div>
        </div>
        <div class="stat">
          <div id="profileFollowersCount" class="stat-value">1.2K</div>
          <div class="stat-label">Followers</div>
        </div>
        <div class="stat">
          <div id="profileFollowingCount" class="stat-value">345</div>
          <div class="stat-label">Following</div>
        </div>
        <div class="stat">
          <div id="profileEcoCredits" class="stat-value">876</div>
          <div class="stat-label">Eco-Credits</div>
        </div>
      </div>
      
      <div class="eco-impact">
        <h3><i class="fa-solid fa-leaf"></i> Your Environmental Impact</h3>
        <div id="profileImpactItems">
          <div class="impact-item">
            <div class="impact-icon">
              <i class="fa-solid fa-tree"></i>
            </div>
            <div class="impact-details">
              <p class="impact-title">Trees Saved</p>
              <p class="impact-value">12 trees through recycling efforts</p>
            </div>
          </div>
          <div class="impact-item">
            <div class="impact-icon">
              <i class="fa-solid fa-droplet"></i>
            </div>
            <div class="impact-details">
              <p class="impact-title">Water Conserved</p>
              <p class="impact-value">1,250 gallons through awareness campaigns</p>
            </div>
          </div>
          <div class="impact-item">
            <div class="impact-icon">
              <i class="fa-solid fa-bolt"></i>
            </div>
            <div class="impact-details">
              <p class="impact-title">Energy Saved</p>
              <p class="impact-value">340 kWh through sustainable practices</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="poster-actions">
        <button id="editProfile" class="control-btn" style="background: #4CAF50; color: white;">
          <i class="fas fa-edit"></i> Edit Profile
        </button>
        <button id="closeProfileModal" class="control-btn" style="background: #607d8b; color: white;">
          <i class="fas fa-times"></i> Close
        </button>
      </div>
    </div>
  </div>

  <!-- Add Post Modal -->
  <div id="addPostModal" class="add-post-modal">
    <div class="add-post-content">
      <h3>Create New Post</h3>
      
      <div class="post-preview">
        <div class="placeholder">Select an image or video to upload</div>
        <img id="postPreview" style="display: none;">
      </div>
      
      <input type="file" id="postFile" class="file-input" accept="image/*,video/*">
      <label for="postFile" class="file-label">
        <i class="fas fa-upload"></i> Choose File
      </label>
      
      <textarea id="postCaption" class="post-caption" placeholder="Write a caption..." rows="3"></textarea>
      
      <div class="post-tags" id="tagsContainer">
        <div class="tag" data-tag="ClimateAction">#ClimateAction</div>
        <div class="tag" data-tag="SaveThePlanet">#SaveThePlanet</div>
        <div class="tag" data-tag="Sustainability">#Sustainability</div>
        <div class="tag" data-tag="GreenLiving">#GreenLiving</div>
        <div class="tag" data-tag="EcoFriendly">#EcoFriendly</div>
        <div class="tag" data-tag="ZeroWaste">#ZeroWaste</div>
      </div>
      
      <div class="poster-actions">
        <button id="createPost" class="control-btn" style="background: #4CAF50; color: white;">
          <i class="fas fa-paper-plane"></i> Post
        </button>
        <button id="closeAddPostModal" class="control-btn" style="background: #607d8b; color: white;">
          <i class="fas fa-times"></i> Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Story Viewer -->
  <div id="storyViewer" class="story-viewer">
    <div class="story-close" id="closeStory">
      <i class="fas fa-times"></i>
    </div>
    <div class="story-progress">
      <!-- Progress segments will be added dynamically -->
    </div>
    <div class="story-content">
      <img id="storyImage" class="story-image" src="/placeholder.svg" alt="Story">
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Floating Action Button -->
  <div class="fab" id="fab">
    <i class="fa-solid fa-plus"></i>
  </div>

  <script>
    // Static data for the app
    const staticData = {
      currentUser: {
        id: 1,
        name: "EcoWarrior",
        username: "ecofriendly",
        avatar: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop",
        bio: "Environmental activist passionate about sustainable living and conservation.",
        postsCount: 24,
        followersCount: 1200,
        followingCount: 345,
        ecoCredits: 876,
        impacts: [
          {
            icon: "fa-tree",
            title: "Trees Saved",
            value: "12 trees through recycling efforts"
          },
          {
            icon: "fa-droplet",
            title: "Water Conserved",
            value: "1,250 gallons through awareness campaigns"
          },
          {
            icon: "fa-bolt",
            title: "Energy Saved",
            value: "340 kWh through sustainable practices"
          }
        ]
      },
      stories: [
        {
          id: 1,
          user: {
            id: 2,
            username: "greenwarrior",
            avatar: "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1000&auto=format&fit=crop"
          },
          imageUrl: "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1000&auto=format&fit=crop",
          createdAt: new Date(Date.now() - 3600000).toISOString()
        },
        {
          id: 2,
          user: {
            id: 3,
            username: "earthlover",
            avatar: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000&auto=format&fit=crop"
          },
          imageUrl: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000&auto=format&fit=crop",
          createdAt: new Date(Date.now() - 7200000).toISOString()
        },
        {
          id: 3,
          user: {
            id: 4,
            username: "oceansaver",
            avatar: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=1000&auto=format&fit=crop"
          },
          imageUrl: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=1000&auto=format&fit=crop",
          createdAt: new Date(Date.now() - 10800000).toISOString()
        },
        {
          id: 4,
          user: {
            id: 5,
            username: "sustainableliving",
            avatar: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop"
          },
          imageUrl: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop",
          createdAt: new Date(Date.now() - 14400000).toISOString()
        },
        {
          id: 5,
          user: {
            id: 6,
            username: "zerowaste",
            avatar: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=1000&auto=format&fit=crop"
          },
          imageUrl: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=1000&auto=format&fit=crop",
          createdAt: new Date(Date.now() - 18000000).toISOString()
        }
      ],
      posts: [
        {
          id: 1,
          user: {
            id: 2,
            username: "greenwarrior",
            avatar: "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1000&auto=format&fit=crop"
          },
          caption: "Planting trees today for a better tomorrow! 🌱 #Reforestation #ClimateAction",
          mediaUrl: "https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?q=80&w=1000&auto=format&fit=crop",
          liked: false,
          likesCount: 243,
          comments: [
            {
              id: 1,
              user: {
                id: 3,
                username: "earthlover",
                avatar: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000&auto=format&fit=crop"
              },
              text: "Amazing work! Keep it up! 👏",
              createdAt: new Date(Date.now() - 3600000).toISOString()
            },
            {
              id: 2,
              user: {
                id: 4,
                username: "oceansaver",
                avatar: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=1000&auto=format&fit=crop"
              },
              text: "This is so inspiring! I'm planning to join a tree planting event next weekend.",
              createdAt: new Date(Date.now() - 7200000).toISOString()
            }
          ],
          createdAt: new Date(Date.now() - 86400000).toISOString(),
          impact: {
            type: "",
            credits: 45
          }
        },
        {
          id: 2,
          user: {
            id: 3,
            username: "earthlover",
            avatar: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000&auto=format&fit=crop"
          },
          caption: "Beach cleanup day! Collected over 50 pounds of plastic. Every bit helps to save our oceans. 🌊 #OceanConservation #PlasticFree",
          mediaUrl: "https://images.unsplash.com/photo-1618477461853-cf6ed80faba5?q=80&w=1000&auto=format&fit=crop",
          liked: true,
          likesCount: 567,
          comments: [
            {
              id: 3,
              user: {
                id: 1,
                username: "ecofriendly",
                avatar: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop"
              },
              text: "Thank you for your dedication! The oceans need more people like you.",
              createdAt: new Date(Date.now() - 1800000).toISOString()
            }
          ],
          createdAt: new Date(Date.now() - 172800000).toISOString(),
          impact: {
            type: "water",
            credits: 78
          }
        },
        {
          id: 3,
          user: {
            id: 5,
            username: "sustainableliving",
            avatar: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop"
          },
          caption: "My zero waste kitchen essentials! Reducing plastic one step at a time. 🌿 #ZeroWaste #SustainableLiving",
          mediaUrl: "https://images.unsplash.com/photo-1584473457493-17c4c24290c5?q=80&w=1000&auto=format&fit=crop",
          liked: false,
          likesCount: 389,
          comments: [
            {
              id: 4,
              user: {
                id: 6,
                username: "zerowaste",
                avatar: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=1000&auto=format&fit=crop"
              },
              text: "Love your setup! Where did you get those glass containers?",
              createdAt: new Date(Date.now() - 5400000).toISOString()
            }
          ],
          createdAt: new Date(Date.now() - 259200000).toISOString(),
          impact: {
            type: "",
            credits: 32
          }
        }
      ],
      reels: [
        {
          id: 1,
          user: {
            id: 4,
            username: "oceansaver",
            avatar: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=1000&auto=format&fit=crop"
          },
          caption: "The beauty of coral reefs and why we need to protect them. 🐠 #SaveTheReefs #MarineLife",
          mediaUrl: "https://player.vimeo.com/external/517090081.sd.mp4?s=ce3a0c7d5135b4d98ce613c33b25e595b9e82c77&profile_id=165&oauth2_token_id=57447761",
          liked: true,
          likesCount: 892,
          comments: [
            {
              id: 5,
              user: {
                id: 1,
                username: "ecofriendly",
                avatar: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop"
              },
              text: "This is heartbreaking and beautiful at the same time. We need to act now!",
              createdAt: new Date(Date.now() - 2700000).toISOString()
            }
          ],
          createdAt: new Date(Date.now() - 345600000).toISOString(),
          impact: {
            type: "water",
            credits: 120
          }
        },
        {
          id: 2,
          user: {
            id: 6,
            username: "zerowaste",
            avatar: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=1000&auto=format&fit=crop"
          },
          caption: "DIY natural cleaning products that are better for you and the planet! 🧼 #EcoFriendly #NaturalCleaning",
          mediaUrl: "https://player.vimeo.com/external/368484050.sd.mp4?s=e63e98c8b1d5b3a6e6f7d9a9b4a9c9f9b4a9c9f9&profile_id=165&oauth2_token_id=57447761",
          liked: false,
          likesCount: 456,
          comments: [
            {
              id: 6,
              user: {
                id: 5,
                username: "sustainableliving",
                avatar: "https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=1000&auto=format&fit=crop"
              },
              text: "Just tried the vinegar solution and it works great! Thanks for sharing.",
              createdAt: new Date(Date.now() - 9000000).toISOString()
            }
          ],
          createdAt: new Date(Date.now() - 432000000).toISOString(),
          impact: {
            type: "air",
            credits: 67
          }
        },
        {
          id: 3,
          user: {
            id: 2,
            username: "greenwarrior",
            avatar: "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1000&auto=format&fit=crop"
          },
          caption: "The devastating effects of deforestation and what we can do to help. 🌳 #SaveTheTrees #Reforestation",
          mediaUrl: "https://player.vimeo.com/external/371844917.sd.mp4?s=e6c0c064c81a5c1a5c9c7c8c7c7c7c7c7c7c7c7c&profile_id=165&oauth2_token_id=57447761",
          liked: false,
          likesCount: 723,
          comments: [
            {
              id: 7,
              user: {
                id: 3,
                username: "earthlover",
                avatar: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000&auto=format&fit=crop"
              },
              text: "This is so important! I've just donated to a reforestation project.",
              createdAt: new Date(Date.now() - 10800000).toISOString()
            }
          ],
          createdAt: new Date(Date.now() - 518400000).toISOString(),
          impact: {
            type: "",
            credits: 95
          }
        }
      ],
      quotes: [
        {
          id: 1,
          text: "The Earth does not belong to us: we belong to the Earth. - Marlee Matlin"
        },
        {
          id: 2,
          text: "We won't have a society if we destroy the environment. - Margaret Mead"
        },
        {
          id: 3,
          text: "Nature provides a free lunch, but only if we control our appetites. - William Ruckelshaus"
        },
        {
          id: 4,
          text: "The environment is where we all meet; where we all have a mutual interest; it is the one thing all of us share. - Lady Bird Johnson"
        },
        {
          id: 5,
          text: "What we are doing to the forests of the world is but a mirror reflection of what we are doing to ourselves and to one another. - Mahatma Gandhi"
        }
      ],
      tags: [
        {
          id: 1,
          name: "ClimateAction"
        },
        {
          id: 2,
          name: "SaveThePlanet"
        },
        {
          id: 3,
          name: "Sustainability"
        },
        {
          id: 4,
          name: "GreenLiving"
        },
        {
          id: 5,
          name: "EcoFriendly"
        },
        {
          id: 6,
          name: "ZeroWaste"
        }
      ]
    };
    
    // DOM Elements
    const recordingModal = document.getElementById('recordingModal');
    const videoPreview = document.getElementById('videoPreview');
    const startRecordBtn = document.getElementById('startRecord');
    const stopRecordBtn = document.getElementById('stopRecord');
    const uploadBtn = document.getElementById('uploadVideo');
    const closeModalBtn = document.getElementById('closeModal');
    const recordingIndicator = document.getElementById('recordingIndicator');
    const timerDisplay = document.getElementById('timer');
    const posterModal = document.getElementById('posterModal');
    const profileModal = document.getElementById('profileModal');
    const addPostModal = document.getElementById('addPostModal');
    const fab = document.getElementById('fab');
    const tabs = document.querySelectorAll('.tab');
    const navItems = document.querySelectorAll('.sidebar ul li');
    const postFile = document.getElementById('postFile');
    const postPreview = document.getElementById('postPreview');
    const posterCanvas = document.getElementById('posterCanvas');
    const toastContainer = document.getElementById('toastContainer');
    const storyViewer = document.getElementById('storyViewer');
    const storyImage = document.getElementById('storyImage');
    const closeStory = document.getElementById('closeStory');
    
    // Variables
    let mediaRecorder;
    let recordedChunks = [];
    let timerInterval;
    let seconds = 0;
    let selectedTags = [];
    let currentStoryIndex = 0;
    let storyInterval;
    
    // Load all data
    function loadData() {
      loadProfile();
      loadStories();
      loadPosts();
      loadReels();
      loadQuotes();
    }
    
    // Load profile data
    function loadProfile() {
      const user = staticData.currentUser;
      
      // Update profile UI
      document.getElementById('profileName').textContent = user.name;
      document.getElementById('profileUsername').textContent = `@${user.username}`;
      document.getElementById('profileBio').textContent = user.bio || 'No bio yet';
      document.getElementById('profileAvatar').src = user.avatar || 'https://via.placeholder.com/100';
      document.getElementById('profilePostsCount').textContent = user.postsCount;
      document.getElementById('profileFollowersCount').textContent = user.followersCount;
      document.getElementById('profileFollowingCount').textContent = user.followingCount;
      document.getElementById('profileEcoCredits').textContent = user.ecoCredits;
      
      // Load impact items
      const impactContainer = document.getElementById('profileImpactItems');
      impactContainer.innerHTML = '';
      
      user.impacts.forEach(impact => {
        const impactItem = document.createElement('div');
        impactItem.className = 'impact-item';
        impactItem.innerHTML = `
          <div class="impact-icon">
            <i class="fa-solid ${impact.icon}"></i>
          </div>
          <div class="impact-details">
            <p class="impact-title">${impact.title}</p>
            <p class="impact-value">${impact.value}</p>
          </div>
        `;
        impactContainer.appendChild(impactItem);
      });
    }
    
    // Load stories
    function loadStories() {
      const stories = staticData.stories;
      
      const storiesContainer = document.getElementById('stories-container');
      storiesContainer.innerHTML = '';
      
      // Add "My Story" first
      const myStory = document.createElement('div');
      myStory.className = 'story';
      myStory.innerHTML = `
        <button id="showControls">
          <img src="${staticData.currentUser.avatar}" alt="Me">
        </button>
        <p>Me</p>
      `;
      storiesContainer.appendChild(myStory);
      
      // Add other stories
      stories.forEach(story => {
        const storyElement = document.createElement('div');
        storyElement.className = 'story';
        storyElement.innerHTML = `
          <button data-story-id="${story.id}" data-story-url="${story.imageUrl}">
            <img src="${story.user.avatar}" alt="${story.user.username}">
          </button>
          <p>${story.user.username}</p>
        `;
        storiesContainer.appendChild(storyElement);
      });
      
      // Reattach event listener for recording
      document.getElementById('showControls').addEventListener('click', () => {
        recordingModal.style.display = 'flex';
        initializeCamera();
      });
      
      // Add event listeners for viewing stories
      document.querySelectorAll('.story button[data-story-id]').forEach(btn => {
        btn.addEventListener('click', () => {
          const storyId = btn.getAttribute('data-story-id');
          const storyUrl = btn.getAttribute('data-story-url');
          viewStory(storyId, storyUrl);
        });
      });
    }
    
    // View a story
    function viewStory(storyId, storyUrl) {
      // Set the story image
      storyImage.src = storyUrl;
      
      // Create progress bar
      const storyProgress = document.querySelector('.story-progress');
      storyProgress.innerHTML = '<div class="progress-segment"><div class="progress-fill"></div></div>';
      
      // Show the story viewer
      storyViewer.style.display = 'flex';
      
      // Animate progress bar
      const progressFill = document.querySelector('.progress-fill');
      progressFill.style.transition = 'width 5s linear';
      setTimeout(() => {
        progressFill.style.width = '100%';
      }, 100);
      
      // Close story after 5 seconds
      setTimeout(() => {
        storyViewer.style.display = 'none';
      }, 5100);
    }
    
    // Load posts
    function loadPosts() {
      const posts = staticData.posts;
      
      const postsContainer = document.getElementById('posts-tab');
      postsContainer.innerHTML = '';
      
      posts.forEach(post => {
        const postElement = createPostElement(post);
        postsContainer.appendChild(postElement);
      });
    }
    
    // Load reels
    function loadReels() {
      const reels = staticData.reels;
      
      const reelsContainer = document.getElementById('reels-tab');
      reelsContainer.innerHTML = '';
      
      reels.forEach(reel => {
        const reelElement = createReelElement(reel);
        reelsContainer.appendChild(reelElement);
      });
    }
    
    // Create post element
    function createPostElement(post) {
      const postElement = document.createElement('div');
      postElement.className = 'post';
      postElement.setAttribute('data-post-id', post.id);
      
      const timeAgo = getTimeAgo(new Date(post.createdAt));
      
      postElement.innerHTML = `
        <div class="post-header">
          <img src="${post.user.avatar}" alt="${post.user.username}">
          <p>${post.user.username}</p>
          <span style="margin-left: auto; color: #888; font-size: 13px;">${timeAgo}</span>
        </div>
        <p style="padding: 0 20px 10px; color: #555;">${post.caption}</p>
        <img src="${post.mediaUrl}" alt="Post Image" class="post-image">
        
        ${post.impact ? `
        <div class="impact-card ${post.impact.type || ''}">
          <div class="impact-header">
            <i class="fa-solid ${getImpactIcon(post.impact.type)}"></i>
            <span>Environmental Impact</span>
          </div>
          <div class="impact-text">
            This post has earned ${post.impact.credits} eco-credits so far!
          </div>
          <div class="impact-progress">
            <div class="progress-bar" style="width: ${Math.min(100, post.impact.credits / 2)}%"></div>
          </div>
        </div>
        ` : ''}
        
        <div class="post-actions">
          <i class="fa-${post.liked ? 'solid' : 'regular'} fa-heart" data-action="like" style="${post.liked ? 'color: #ff4081;' : ''}"></i>
          <i class="fa-regular fa-comment" data-action="comment"></i>
          <i class="fa-solid fa-share" data-action="share"></i>
          <span style="margin-left: auto; color: #888; font-size: 14px;">${post.likesCount} likes</span>
        </div>
        
        <div class="comments-section">
          ${post.comments.map(comment => `
            <div class="comment">
              <div class="comment-avatar">
                <img src="${comment.user.avatar}" alt="${comment.user.username}">
              </div>
              <div class="comment-content">
                <div class="comment-user">${comment.user.username}</div>
                <div class="comment-text">${comment.text}</div>
                <div class="comment-time">${getTimeAgo(new Date(comment.createdAt))}</div>
              </div>
            </div>
          `).join('')}
          
          <div class="comment-form" style="display: flex; gap: 10px; margin-top: 15px;">
            <div class="comment-avatar">
              <img src="${staticData.currentUser.avatar}" alt="Your avatar">
            </div>
            <input type="text" placeholder="Add a comment..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 20px;" class="comment-input" data-post-id="${post.id}">
            <button style="background: #4CAF50; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer;" class="post-btn" data-post-id="${post.id}">Post</button>
          </div>
        </div>
      `;
      
      // Add event listeners
      const likeBtn = postElement.querySelector('[data-action="like"]');
      likeBtn.addEventListener('click', () => {
        toggleLike(post.id, likeBtn);
      });
      
      const commentBtn = postElement.querySelector('[data-action="comment"]');
      commentBtn.addEventListener('click', () => {
        postElement.querySelector('.comments-section').classList.toggle('active');
      });
      
      const shareBtn = postElement.querySelector('[data-action="share"]');
      shareBtn.addEventListener('click', () => {
        sharePost(post.id);
      });
      
      const commentForm = postElement.querySelector('.comment-form');
      const commentInput = commentForm.querySelector('.comment-input');
      const commentSubmit = commentForm.querySelector('.post-btn');
      
      commentSubmit.addEventListener('click', () => {
        const text = commentInput.value.trim();
        if (text) {
          addComment(post.id, text, commentInput);
        }
      });
      
      commentInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const text = commentInput.value.trim();
          if (text) {
            addComment(post.id, text, commentInput);
          }
        }
      });
      
      return postElement;
    }
    
    // Create reel element
    function createReelElement(reel) {
      const reelElement = document.createElement('div');
      reelElement.className = 'post';
      reelElement.setAttribute('data-reel-id', reel.id);
      
      const timeAgo = getTimeAgo(new Date(reel.createdAt));
      
      reelElement.innerHTML = `
        <div class="post-header">
          <img src="${reel.user.avatar}" alt="${reel.user.username}">
          <p>${reel.user.username}</p>
          <span style="margin-left: auto; color: #888; font-size: 13px;">${timeAgo}</span>
        </div>
        <p style="padding: 0 20px 10px; color: #555;">${reel.caption}</p>
        <video src="${reel.mediaUrl}" controls class="post-video"></video>
        
        ${reel.impact ? `
        <div class="impact-card ${reel.impact.type || ''}">
          <div class="impact-header">
            <i class="fa-solid ${getImpactIcon(reel.impact.type)}"></i>
            <span>Environmental Impact</span>
          </div>
          <div class="impact-text">
            This reel has earned ${reel.impact.credits} eco-credits so far!
          </div>
          <div class="impact-progress">
            <div class="progress-bar" style="width: ${Math.min(100, reel.impact.credits / 2)}%"></div>
          </div>
        </div>
        ` : ''}
        
        <div class="post-actions">
          <i class="fa-${reel.liked ? 'solid' : 'regular'} fa-heart" data-action="like" style="${reel.liked ? 'color: #ff4081;' : ''}"></i>
          <i class="fa-regular fa-comment" data-action="comment"></i>
          <i class="fa-solid fa-share" data-action="share"></i>
          <span style="margin-left: auto; color: #888; font-size: 14px;">${reel.likesCount} likes</span>
        </div>
        
        <div class="comments-section">
          ${reel.comments.map(comment => `
            <div class="comment">
              <div class="comment-avatar">
                <img src="${comment.user.avatar}" alt="${comment.user.username}">
              </div>
              <div class="comment-content">
                <div class="comment-user">${comment.user.username}</div>
                <div class="comment-text">${comment.text}</div>
                <div class="comment-time">${getTimeAgo(new Date(comment.createdAt))}</div>
              </div>
            </div>
          `).join('')}
          
          <div class="comment-form" style="display: flex; gap: 10px; margin-top: 15px;">
            <div class="comment-avatar">
              <img src="${staticData.currentUser.avatar}" alt="Your avatar">
            </div>
            <input type="text" placeholder="Add a comment..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 20px;" class="comment-input" data-reel-id="${reel.id}">
            <button style="background: #4CAF50; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer;" class="post-btn" data-reel-id="${reel.id}">Post</button>
          </div>
        </div>
      `;
      
      // Add event listeners
      const likeBtn = reelElement.querySelector('[data-action="like"]');
      likeBtn.addEventListener('click', () => {
        toggleLike(reel.id, likeBtn, true);
      });
      
      const commentBtn = reelElement.querySelector('[data-action="comment"]');
      commentBtn.addEventListener('click', () => {
        reelElement.querySelector('.comments-section').classList.toggle('active');
      });
      
      const shareBtn = reelElement.querySelector('[data-action="share"]');
      shareBtn.addEventListener('click', () => {
        shareReel(reel.id);
      });
      
      const commentForm = reelElement.querySelector('.comment-form');
      const commentInput = commentForm.querySelector('.comment-input');
      const commentSubmit = commentForm.querySelector('.post-btn');
      
      commentSubmit.addEventListener('click', () => {
        const text = commentInput.value.trim();
        if (text) {
          addComment(reel.id, text, commentInput, true);
        }
      });
      
      commentInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const text = commentInput.value.trim();
          if (text) {
            addComment(reel.id, text, commentInput, true);
          }
        }
      });
      
      return reelElement;
    }
    
    // Load quotes
    function loadQuotes() {
      const quotes = staticData.quotes;
      
      const quotesContainer = document.getElementById('quotes-container');
      quotesContainer.innerHTML = '';
      
      quotes.forEach(quote => {
        const quoteElement = document.createElement('p');
        quoteElement.className = 'quote';
        quoteElement.textContent = quote.text;
        quotesContainer.appendChild(quoteElement);
      });
    }
    
    // Toggle like
    function toggleLike(id, button, isReel = false) {
      // Find the post/reel in the static data
      const items = isReel ? staticData.reels : staticData.posts;
      const item = items.find(item => item.id === parseInt(id));
      
      if (item) {
        // Toggle liked state
        item.liked = !item.liked;
        
        // Update like count
        if (item.liked) {
          item.likesCount++;
          button.classList.remove('fa-regular');
          button.classList.add('fa-solid');
          button.style.color = '#ff4081';
        } else {
          item.likesCount--;
          button.classList.remove('fa-solid');
          button.classList.add('fa-regular');
          button.style.color = '';
        }
        
        // Update like count text
        const likeCount = button.parentElement.querySelector('span');
        likeCount.textContent = `${item.likesCount} likes`;
        
        // Show toast
        showToast(item.liked ? 'Post liked!' : 'Post unliked', 'info');
      }
    }
    
    // Add comment
    function addComment(id, text, inputElement, isReel = false) {
      // Find the post/reel in the static data
      const items = isReel ? staticData.reels : staticData.posts;
      const item = items.find(item => item.id === parseInt(id));
      
      if (item) {
        // Create new comment
        const newComment = {
          id: Date.now(),
          user: staticData.currentUser,
          text: text,
          createdAt: new Date().toISOString()
        };
        
        // Add comment to the item
        item.comments.push(newComment);
        
        // Clear input
        inputElement.value = '';
        
        // Add comment to UI
        const commentsSection = inputElement.closest('.comments-section');
        const commentForm = inputElement.closest('.comment-form');
        
        const commentElement = document.createElement('div');
        commentElement.className = 'comment';
        commentElement.innerHTML = `
          <div class="comment-avatar">
            <img src="${staticData.currentUser.avatar}" alt="${staticData.currentUser.username}">
          </div>
          <div class="comment-content">
            <div class="comment-user">${staticData.currentUser.username}</div>
            <div class="comment-text">${newComment.text}</div>
            <div class="comment-time">Just now</div>
          </div>
        `;
        
        commentsSection.insertBefore(commentElement, commentForm);
        commentsSection.classList.add('active');
        
        // Show toast
        showToast('Comment added!', 'success');
      }
    }
    
    // Share post/reel
    function sharePost(id) {
      // This would open a share dialog
      showToast('Share functionality would appear here', 'info');
    }
    
    function shareReel(id) {
      // This would open a share dialog
      showToast('Share functionality would appear here', 'info');
    }
    
    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      loadData();
      
      // Initialize progress bars
      document.querySelectorAll('.progress-bar').forEach(bar => {
        setTimeout(() => {
          bar.style.width = bar.parentElement.getAttribute('data-progress') || '50%';
        }, 500);
      });
    });
    
    // Navigation
    navItems.forEach(item => {
      item.addEventListener('click', function() {
        navItems.forEach(nav => nav.classList.remove('active'));
        this.classList.add('active');
        
        const id = this.id;
        
        if (id === 'nav-poster') {
          posterModal.style.display = 'flex';
          generatePoster();
        } else if (id === 'nav-profile') {
          profileModal.style.display = 'flex';
        } else if (id === 'nav-add-post') {
          addPostModal.style.display = 'flex';
        }
      });
    });
    
    // Tabs
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabName = tab.getAttribute('data-tab');
        
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        if (tabName === 'posts') {
          document.getElementById('posts-tab').style.display = 'block';
          document.getElementById('reels-tab').style.display = 'none';
        } else {
          document.getElementById('posts-tab').style.display = 'none';
          document.getElementById('reels-tab').style.display = 'block';
        }
      });
    });
    
    // FAB
    fab.addEventListener('click', () => {
      addPostModal.style.display = 'flex';
    });
    
    // Close modals
    document.getElementById('closePosterModal').addEventListener('click', () => {
      posterModal.style.display = 'none';
    });
    
    document.getElementById('closeProfileModal').addEventListener('click', () => {
      profileModal.style.display = 'none';
    });
    
    document.getElementById('closeAddPostModal').addEventListener('click', () => {
      addPostModal.style.display = 'none';
    });
    
    closeStory.addEventListener('click', () => {
      storyViewer.style.display = 'none';
    });
    
    // Camera functionality
    async function initializeCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ 
          video: {
            width: { ideal: 1280 },
            height: { ideal: 720 }
          }, 
          audio: true 
        });
        videoPreview.srcObject = stream;
        mediaRecorder = new MediaRecorder(stream, {
          mimeType: 'video/webm; codecs=vp9'
        });
  
        mediaRecorder.ondataavailable = (event) => {
          if (event.data.size > 0) {
            recordedChunks.push(event.data);
          }
        };
  
        mediaRecorder.onstop = () => {
          const videoBlob = new Blob(recordedChunks, { type: 'video/webm' });
          uploadBtn.disabled = false;
          stopTimer();
          recordingIndicator.style.display = 'none';
        };
  
      } catch (error) {
        console.error("Error accessing camera:", error);
        showToast("Could not access camera. Please check permissions.", "error");
        closeModal();
      }
    }
    
    startRecordBtn.addEventListener('click', () => {
      recordedChunks = [];
      mediaRecorder.start(1000); 
      startRecordBtn.disabled = true;
      stopRecordBtn.disabled = false;
      uploadBtn.disabled = true;
      recordingIndicator.style.display = 'flex';
      startTimer();
    });
    
    stopRecordBtn.addEventListener('click', stopRecording);
  
    function stopRecording() {
      if (mediaRecorder && mediaRecorder.state !== 'inactive') {
        mediaRecorder.stop();
        startRecordBtn.disabled = false;
        stopRecordBtn.disabled = true;
      }
    }
    
    uploadBtn.addEventListener('click', () => {
      showToast('Story uploaded successfully!', 'success');
      closeModal();
    });
    
    function startTimer() {
      seconds = 0;
      updateTimer();
      timerInterval = setInterval(updateTimer, 1000);
    }
  
    function stopTimer() {
      clearInterval(timerInterval);
    }
  
    function updateTimer() {
      seconds++;
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      timerDisplay.textContent = 
        `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
    }
    
    function closeModal() {
      recordingModal.style.display = 'none';
      if (videoPreview.srcObject) {
        videoPreview.srcObject.getTracks().forEach(track => track.stop());
      }
      recordedChunks = [];
      startRecordBtn.disabled = false;
      stopRecordBtn.disabled = true;
      uploadBtn.disabled = true;
      recordingIndicator.style.display = 'none';
      stopTimer();
      timerDisplay.textContent = '00:00';
      videoPreview.srcObject = null;
    }
    
    closeModalBtn.addEventListener('click', () => {
      stopRecording();
      closeModal();
    });
    
    // Post file preview
    postFile.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          postPreview.src = e.target.result;
          postPreview.style.display = 'block';
          document.querySelector('.placeholder').style.display = 'none';
        }
        reader.readAsDataURL(file);
      }
    });
    
    // Create post
    document.getElementById('createPost').addEventListener('click', () => {
      const caption = document.getElementById('postCaption').value;
      const file = postFile.files[0];
      
      if (!file) {
        showToast('Please select an image or video', 'error');
        return;
      }
      
      // Get selected tags
      selectedTags = [];
      document.querySelectorAll('.tag.active').forEach(tag => {
        selectedTags.push(tag.getAttribute('data-tag'));
      });
      
      // Create a new post or reel
      const isVideo = file.type.startsWith('video');
      
      if (isVideo) {
        // Create a new reel
        const newReel = {
          id: staticData.reels.length + 1,
          user: staticData.currentUser,
          caption: caption,
          mediaUrl: URL.createObjectURL(file),
          liked: false,
          likesCount: 0,
          comments: [],
          createdAt: new Date().toISOString(),
          impact: {
            type: "air",
            credits: 10
          }
        };
        
        // Add to static data
        staticData.reels.unshift(newReel);
        
        // Reset the form
        document.getElementById('postCaption').value = '';
        postFile.value = '';
        postPreview.style.display = 'none';
        document.querySelector('.placeholder').style.display = 'none';
        document.querySelectorAll('.tag').forEach(tag => tag.classList.remove('active'));
        
        // Close the modal
        addPostModal.style.display = 'none';
        
        showToast('Reel created successfully!', 'success');
        
        // Switch to reels tab and reload
        tabs.forEach(t => t.classList.remove('active'));
        document.querySelector('[data-tab="reels"]').classList.add('active');
        document.getElementById('posts-tab').style.display = 'none';
        document.getElementById('reels-tab').style.display = 'block';
        loadReels();
      } else {
        // Create a new post
        const newPost = {
          id: staticData.posts.length + 1,
          user: staticData.currentUser,
          caption: caption,
          mediaUrl: URL.createObjectURL(file),
          liked: false,
          likesCount: 0,
          comments: [],
          createdAt: new Date().toISOString(),
          impact: {
            type: "",
            credits: 10
          }
        };
        
        // Add to static data
        staticData.posts.unshift(newPost);
        
        // Reset the form
        document.getElementById('postCaption').value = '';
        postFile.value = '';
        postPreview.style.display = 'none';
        document.querySelector('.placeholder').style.display = 'none';
        document.querySelectorAll('.tag').forEach(tag => tag.classList.remove('active'));
        
        // Close the modal
        addPostModal.style.display = 'none';
        
        showToast('Post created successfully!', 'success');
        
        // Switch to posts tab and reload
        tabs.forEach(t => t.classList.remove('active'));
        document.querySelector('[data-tab="posts"]').classList.add('active');
        document.getElementById('posts-tab').style.display = 'block';
        document.getElementById('reels-tab').style.display = 'none';
        loadPosts();
      }
    });
    
    // Tag selection
    document.querySelectorAll('.tag').forEach(tag => {
      tag.addEventListener('click', () => {
        tag.classList.toggle('active');
      });
    });
    
    // Poster Generator
    document.getElementById('generatePoster').addEventListener('click', generatePoster);
    
    function generatePoster() {
      const canvas = document.getElementById('posterCanvas');
      const ctx = canvas.getContext('2d');
      const title = document.getElementById('posterTitle').value || 'Save Our Planet';
      const subtitle = document.getElementById('posterSubtitle').value || 'Every action counts';
      const theme = document.getElementById('posterTheme').value;
      const color = document.getElementById('posterColor').value;
      
      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Background gradient
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, color);
      gradient.addColorStop(1, '#ffffff');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Theme-based icon
      ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
      ctx.beginPath();
      
      if (theme === 'forest') {
        // Draw tree silhouette
        ctx.moveTo(250, 150);
        ctx.lineTo(300, 300);
        ctx.lineTo(350, 250);
        ctx.lineTo(400, 400);
        ctx.lineTo(100, 400);
        ctx.lineTo(150, 250);
        ctx.lineTo(200, 300);
        ctx.closePath();
      } else if (theme === 'ocean') {
        // Draw wave pattern
        for (let x = 0; x < canvas.width; x += 50) {
          ctx.moveTo(x, 250);
          ctx.quadraticCurveTo(x + 25, 200, x + 50, 250);
          ctx.quadraticCurveTo(x + 75, 300, x + 100, 250);
        }
      } else if (theme === 'climate') {
        // Draw sun and clouds
        ctx.arc(250, 200, 100, 0, Math.PI * 2);
      } else if (theme === 'wildlife') {
        // Draw animal silhouette (simplified)
        ctx.ellipse(250, 250, 150, 100, 0, 0, Math.PI * 2);
      } else if (theme === 'recycling') {
        // Draw recycling symbol
        ctx.arc(250, 250, 100, 0, Math.PI * 2);
        ctx.moveTo(200, 200);
        ctx.lineTo(300, 300);
        ctx.moveTo(300, 200);
        ctx.lineTo(200, 300);
      }
      
      ctx.fill();
      
      // Title
      ctx.fillStyle = '#ffffff';
      ctx.font = 'bold 40px Poppins';
      ctx.textAlign = 'center';
      ctx.fillText(title, canvas.width / 2, 100);
      
      // Subtitle
      ctx.fillStyle = '#ffffff';
      ctx.font = '24px Poppins';
      ctx.fillText(subtitle, canvas.width / 2, 150);
      
      // Theme-specific text
      ctx.fillStyle = '#ffffff';
      ctx.font = '18px Poppins';
      
      let themeText = '';
      switch(theme) {
        case 'forest':
          themeText = 'Forests are the lungs of our planet.\nProtect them.';
          break;
        case 'ocean':
          themeText = 'Our oceans, our responsibility.\nKeep them clean.';
          break;
        case 'climate':
          themeText = 'Climate change is real.\nAct now before it\'s too late.';
          break;
        case 'wildlife':
          themeText = 'Every species matters.\nProtect wildlife habitats.';
          break;
        case 'recycling':
          themeText = 'Reduce. Reuse. Recycle.\nMake it a habit.';
          break;
      }
      
      const lines = themeText.split('\n');
      lines.forEach((line, i) => {
        ctx.fillText(line, canvas.width / 2, 500 + (i * 30));
      });
      
      // Footer
      ctx.fillStyle = '#ffffff';
      ctx.font = '16px Poppins';
      ctx.fillText('Created with EcoSocial', canvas.width / 2, 650);
    }
    
    document.getElementById('downloadPoster').addEventListener('click', () => {
      const canvas = document.getElementById('posterCanvas');
      const link = document.createElement('a');
      link.download = 'eco-poster.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
      
      showToast('Poster downloaded successfully!', 'success');
    });
    
    document.getElementById('sharePoster').addEventListener('click', () => {
      // Create a new post with the poster
      const canvas = document.getElementById('posterCanvas');
      const posterUrl = canvas.toDataURL('image/png');
      
      const newPost = {
        id: staticData.posts.length + 1,
        user: staticData.currentUser,
        caption: 'Check out my new environmental awareness poster! #EcoAwareness',
        mediaUrl: posterUrl,
        liked: false,
        likesCount: 0,
        comments: [],
        createdAt: new Date().toISOString(),
        impact: {
          type: "",
          credits: 15
        }
      };
      
      // Add to static data
      staticData.posts.unshift(newPost);
      
      // Close the modal
      posterModal.style.display = 'none';
      
      showToast('Poster shared to your feed!', 'success');
      
      // Switch to posts tab and reload
      tabs.forEach(t => t.classList.remove('active'));
      document.querySelector('[data-tab="posts"]').classList.add('active');
      document.getElementById('posts-tab').style.display = 'block';
      document.getElementById('reels-tab').style.display = 'none';
      loadPosts();
    });
    
    // Helper functions
    function getTimeAgo(date) {
      const seconds = Math.floor((new Date() - date) / 1000);
      
      let interval = Math.floor(seconds / 31536000);
      if (interval > 1) return interval + ' years ago';
      if (interval === 1) return '1 year ago';
      
      interval = Math.floor(seconds / 2592000);
      if (interval > 1) return interval + ' months ago';
      if (interval === 1) return '1 month ago';
      
      interval = Math.floor(seconds / 86400);
      if (interval > 1) return interval + ' days ago';
      if (interval === 1) return '1 day ago';
      
      interval = Math.floor(seconds / 3600);
      if (interval > 1) return interval + ' hours ago';
      if (interval === 1) return '1 hour ago';
      
      interval = Math.floor(seconds / 60);
      if (interval > 1) return interval + ' minutes ago';
      if (interval === 1) return '1 minute ago';
      
      return 'Just now';
    }
    
    function getImpactIcon(type) {
      switch(type) {
        case 'water':
          return 'fa-droplet';
        case 'air':
          return 'fa-wind';
        default:
          return 'fa-leaf';
      }
    }
    
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
        <span>${message}</span>
      `;
      
      toastContainer.appendChild(toast);
      
      // Remove after 3 seconds
      setTimeout(() => {
        toast.remove();
      }, 3000);
    }
    
    // Close modals when clicking outside
    window.addEventListener('click', (e) => {
      if (e.target === recordingModal) {
        closeModal();
      }
      if (e.target === posterModal) {
        posterModal.style.display = 'none';
      }
      if (e.target === profileModal) {
        profileModal.style.display = 'none';
      }
      if (e.target === addPostModal) {
        addPostModal.style.display = 'none';
      }
      if (e.target === storyViewer) {
        storyViewer.style.display = 'none';
      }
    });
    
    // Initialize poster generator on load
    window.addEventListener('load', () => {
      generatePoster();
      
      // Animate progress bars
      document.querySelectorAll('.progress-bar').forEach(bar => {
        setTimeout(() => {
          const width = bar.parentElement.parentElement.querySelector('.impact-text').textContent.match(/\d+/)[0];
          bar.style.width = Math.min(100, width / 2) + '%';
        }, 500);
      });
    });
  </script>
</body>
</html>

